# Plotting Functions

These functions are all located in [`drb_make_figs.py`](../API_References/drb_make_figs.md) and are used to produce the figures shown in [Figures](../Getting_Started/Interpret_Results/output_figures.md). All figures (for different models and nodes) are produced and saved in `DRB_water_management/figs/` when `drb_make_figs.py` is executed.


**Functions:**
- `plot_3part_flows()`
Produces a 3-panel plot containing flow timeseries, scatter plot, and flow duration plot for observed and modeled data.

- `plot_weekly_flow_distributions()`
Plots distributions of weekly flows, for observed and 1 or two modeled data at a specific node.

- `plot_radial_error_metrics()`
Generates radial plots across different metrics/reservoirs/models.

- `plot_rrv_metrics()`
Generates a 3-panel plot containing histograms of reliability, resiliency, & vulnerability (RRV) for different models & nodes.

- `plot_flow_contributions()`
Generates a stacked area plot of streamflow timeseries at a given node and for a given model.


***
### `plot_3part_flows()`
A plotting function to produce a 3-panel plot containing flow timeseries, scatter plot, and flow duration plot for observed and modeled data. Can plot observed plus 1 or 2 modeled series.

#### Syntax
```python
plot_3part_flows(results: pd.DataFrame, models: list, node: str, colors=['0.5', '#67a9cf', '#ef8a62'], uselog=False) -> None
```

**Parameters:**
- `results` (pd.DataFrame): The df containing results, generated by `get_pywr_results()` or `get_base_results()`.
- `models` (list): The list of strings of length 1 or 2 containing indicator names for the datasets/models of interest.
- `node` (str): The name of the node of interest.
- `colors` (list): A list of colors.
- `uselog` (bool): Boolean to use log-transformation of flows. Default is False.

**Returns:**
- `None`: The figure is saved.


***
### `plot_weekly_flow_distributions()`
Plots distributions of weekly flows, for observed and 1 or two modeled data at a specific node. Produces a 2-panel plot with normal and log-space flow distributions.

#### Syntax:
```python
plot_weekly_flow_distributions(results: pd.DataFrame, models: list, node: str, colors=['0.5', '#67a9cf', '#ef8a62']) -> None
```

**Parameters:**
- `results` (pd.DataFrame): The df containing results, generated by `get_pywr_results()` or `get_base_results()`.
- `models` (list): The list of strings of length 1 or 2 containing indicator names for the datasets/models of interest.
- `node` (str): The name of the node of interest.
- `colors` (list): A list of colors.

**Returns:**
- `None`: The figure is saved.


***
### `plot_radial_error_metrics()`
Generates radial plots across different metrics/reservoirs/models.

#### Syntax
```python
plot_radial_error_metrics(results_metrics: pd.DataFrame, radial_models: list, nodes: list, useNonPep = True, useweap = True, usepywr = True, usemajorflows=False) -> None
```

**Parameters:**
- `results_metrics` (pd.DataFrame): The df containing all error metrics, produced by `get_error_metrics()`.
- `radial_models` (list): A list of strings containing model names.
- `nodes` (list): A list of strings containing node names.

**Returns:**
- `None`: The figure is saved.


***
### `plot_rrv_metrics()`
Generates a 3-panel plot containing histograms of reliability, resiliency, & vulnerability (RRV) for different models & nodes. RRV metrics are based on Hashimoto et al. (1982) and Montague and Trenton flow objectes.

#### Syntax
```python
plot_rrv_metrics(rrv_metrics: pd.DataFrame, rrv_models: list, nodes: list) -> None
```

**Parameters:**
- `rrv_metrics` (pd.DataFrame): The df containing all RRV metrics, produced by `get_RRV_metrics()`.
- `rrv_models` (list): A list of strings containing model names.
- `nodes` (list): A list of strings containing node names.

**Returns:**
- `None`: The figure is saved


***
### `plot_flow_contributions()`
Generates a stacked area plot of streamflow timeseries at a given node and for a given model. The stacked area can either be absolute flow or percentage of total flow.

#### Syntax
```python
plot_flow_contributions(res_releases: pd.DataFrame, major_flows: pd.DataFrame, model: str, node: str, separate_pub_contributions = False, percentage_flow = True, plot_target = False) -> None
```

**Parameters:**
- `res_releases` (pd.DataFrame): The df of simualted reservoir releases.
- `major_flows` (pd.DataFrame): The df of simulated flows at major nodes.
- `model` (str): The name of the model of interest.
- `node` (str): The name of the node of interest; must be available in `major_flows`.
- `percentage_flow` (bool): Indicator if plot should be percentage of total flow (True) or absolute. Default is True.
- `plot_target` (bool): Indicator if the flow target should be included as a dashed line.

**Returns:**
- `None`: The figure is saved.
